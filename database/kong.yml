# Kong API Gateway Configuration
# Kong acts as a reverse proxy and unified entry point for all Supabase services.
# It routes incoming HTTP requests to the appropriate microservice (PostgREST, GoTrue, Storage, etc.)
# and handles authentication, rate limiting, and request transformation.
# This allows the Nuxt app to access all Supabase features through a single endpoint.

_format_version: '2.1'
_transform: true

services:
  - name: meta
    url: http://meta:8080
    routes:
      - name: meta-all
        strip_path: true
        paths:
          - /pg/

  - name: rest
    url: http://rest:3000
    routes:
      - name: rest-v1
        strip_path: true
        paths:
          - /rest/v1/
